---
title: Using Bézier Curves
author: Daniel
layout: post
permalink: /using-bezier-curves/
categories:
  - code
  - graphics
  - maths
tags:
  - bezier
  - java
  - maths
---
Bézier Curves are useful in computer graphics, because they provide a neat way to describe a curve or path mathematically. From this we can use them to draw all sorts of different curves and shapes graphically. 
### Straight Line &#8211; 2 points The simplest bézier curve is a straight line. It only has two co-ordinates, the two end points of the line. We can describe the line as a function, with various inputs to describe the line. 

**[x, y] = (1 &#8211; t) P<sub></sub> + t P<sub>1</sub>** P<sub></sub> and P<sub>1</sub> represent the end points of the line. The **t** represents a point on the curve. It&#8217;s value can range from 0 to 1, with 0.5 being the centre point of the line. For example, a line with end points (1,1) and (3,3) will have a centre point along the line of (2,2). Let&#8217;s use the function to prove that mathematically. **x = (1 &#8211; 0.5) P<sub>0x</sub> + t P<sub>1x</sub>** = **x = 0.5 \* 1 + 0.5 \* 3** = 2 **y = (1 &#8211; 0.5) P<sub>0y</sub> + t P<sub>1y</sub>** = **y = 0.5 \* 1 + 0.5 \* 3** = 2 Of course, we want to be able to do more interesting things than simple straight lines. The point of using bézier curves is to create nice curved lines. 
### Linear Curve &#8211; 3 points If we want to make a simple curved line or linear curve, we need to add an extra point to our function. This will be the point the curve will bend around. 

**[x, y] = ( 1 &#8211; t )<sup>2</sup> P<sub></sub> + 2( 1 &#8211; t ) t P<sub>1</sub> + t<sup>2</sup> P<sub>2</sub>** This is solved in the exact same way as the simple line, with **t** being your point along the line. 
### Cubic Curve &#8211; 4 points The most common use of bézier curves though is the 4 point, cubic curve. This like the others uses a function with points along the line. They usually look something like this. 

<img src="https://dl.dropboxusercontent.com/u/97701559/blog/cubic-bezier.png" alt="cubic bezier" width="400" height="250" /> With the function being: **[x, y] = ( 1 &#8211; t )<sup>3</sup> P<sub></sub> + 3( 1 &#8211; t )<sup>2</sup> t P<sub>1</sub> + 3( 1 &#8211; t ) t<sup>2</sup> P<sub>2</sub> + t<sup>3</sup> P<sub>3</sub>** If we were to move P<sub>2</sub> under the current curve, we would produce an S shaped curve. 
### Drawing a bézier curve graphically Now that we know the function which will produce any point along a plotted bézier curve, we can draw it onto a screen. To do this we need to query the function x number of times for a point along the curve. If we use two few points e.g. the 2 end points and the middle point, we get a very jagged curve. If we sample it too many times, we get a smooth curve, but it&#8217;s computationally expensive. There exist algorithms for optimizing the number of queries needed for a smooth curve, but for this example we&#8217;ll just use a draw_line function and a simple loop. To calculate the point we can write a simple function 

<div class="codecolorer-container java railscasts" style="overflow:auto;white-space:nowrap;">
  <div class="java codecolorer">
    <span class="kw1">private</span> <span class="kw4">double</span> calc_bez_point<span class="br0">&#40;</span><span class="kw4">double</span> t, <span class="kw4">double</span> p0, <span class="kw4">double</span> p1, <span class="kw4">double</span> p2, <span class="kw4">double</span> p3<span class="br0">&#41;</span> <span class="br0">&#123;</span><br /> &nbsp; <span class="kw4">double</span> u <span class="sy0">=</span> <span class="nu0">1</span> <span class="sy0">-</span> t<span class="sy0">;</span><br /> &nbsp; <span class="kw4">double</span> tt <span class="sy0">=</span> t <span class="sy0">*</span> t<span class="sy0">;</span><br /> &nbsp; <span class="kw4">double</span> uu <span class="sy0">=</span> u <span class="sy0">*</span> u<span class="sy0">;</span><br /> &nbsp; <span class="kw4">double</span> uuu <span class="sy0">=</span> uu <span class="sy0">*</span> u<span class="sy0">;</span><br /> &nbsp; <span class="kw4">double</span> ttt <span class="sy0">=</span> tt <span class="sy0">*</span> t<span class="sy0">;</span><br /> <br /> &nbsp; <span class="kw4">double</span> p <span class="sy0">=</span> uuu <span class="sy0">*</span> p0<span class="sy0">;</span> &nbsp;<span class="co1">//1st point</span><br /> &nbsp; p <span class="sy0">+=</span> <span class="nu0">3</span> <span class="sy0">*</span> uu <span class="sy0">*</span> t <span class="sy0">*</span> p1<span class="sy0">;</span> <span class="co1">//2nd point</span><br /> &nbsp; p <span class="sy0">+=</span> <span class="nu0">3</span> <span class="sy0">*</span> u <span class="sy0">*</span> tt <span class="sy0">*</span> p2<span class="sy0">;</span> <span class="co1">//3rd point</span><br /> &nbsp; p <span class="sy0">+=</span> ttt <span class="sy0">*</span> p3<span class="sy0">;</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">//4th point</span><br /> <br /> &nbsp; <span class="kw1">return</span> p<span class="sy0">;</span><br /> <span class="br0">&#125;</span>
  </div>
</div> Where P

<sub></sub> and P<sub>3</sub> are your end points, and P<sub>1</sub> and P<sub>2</sub> are your control points. Note this function only works on one axis, so you&#8217;ll have to call it once for x and once for y. You can also implement this with Vectors and just have the one function call. Now we just need to call calc\_bez\_point a certain amount of times, incrementing the t value we pass each time. <div class="codecolorer-container java railscasts" style="overflow:auto;white-space:nowrap;">
  <div class="java codecolorer">
    <span class="kw1">private</span> <span class="kw4">void</span> draw_bezier<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br /> &nbsp; <span class="kw4">double</span> xp0 <span class="sy0">=</span> calc_bez_point<span class="br0">&#40;</span><span class="nu0"></span>, <span class="nu0"></span>, <span class="nu0">130</span>, <span class="nu0">580</span>, <span class="nu0">500</span><span class="br0">&#41;</span><span class="sy0">;</span><br /> &nbsp; <span class="kw4">double</span> yp0 <span class="sy0">=</span> calc_bez_point<span class="br0">&#40;</span><span class="nu0"></span>, <span class="nu0"></span>, <span class="nu0">400</span>, <span class="nu0">45</span>, <span class="nu0">400</span><span class="br0">&#41;</span><span class="sy0">;</span><br /> &nbsp; <span class="kw4">int</span> num_lines <span class="sy0">=</span> <span class="nu0">30</span><span class="sy0">;</span><br /> &nbsp; <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">double</span> i <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">;</span> i <span class="sy0"><</span> num_lines <span class="sy0">+</span> <span class="nu0">1</span><span class="sy0">;</span> i <span class="sy0">+=</span> <span class="nu0">1</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br /> &nbsp; &nbsp; <span class="kw4">double</span> xp1 <span class="sy0">=</span> calc_bez_point<span class="br0">&#40;</span>i <span class="sy0">/</span> num_lines, <span class="nu0"></span>, <span class="nu0">130</span>, <span class="nu0">580</span>, <span class="nu0">500</span><span class="br0">&#41;</span><span class="sy0">;</span><br /> &nbsp; &nbsp; <span class="kw4">double</span> yp1 <span class="sy0">=</span> calc_bez_point<span class="br0">&#40;</span>i <span class="sy0">/</span> num_lines, <span class="nu0"></span>, <span class="nu0">400</span>, <span class="nu0">45</span>, <span class="nu0">400</span><span class="br0">&#41;</span><span class="sy0">;</span><br /> &nbsp; &nbsp; drawLine<span class="br0">&#40;</span><span class="br0">&#40;</span><span class="kw4">int</span><span class="br0">&#41;</span> xp0, <span class="br0">&#40;</span><span class="kw4">int</span><span class="br0">&#41;</span> yp0, <span class="br0">&#40;</span><span class="kw4">int</span><span class="br0">&#41;</span> xp1, <span class="br0">&#40;</span><span class="kw4">int</span><span class="br0">&#41;</span> yp1<span class="br0">&#41;</span><span class="sy0">;</span><br /> &nbsp; &nbsp; xp0 <span class="sy0">=</span> xp1<span class="sy0">;</span><br /> &nbsp; &nbsp; yp0 <span class="sy0">=</span> yp1<span class="sy0">;</span><br /> &nbsp; <span class="br0">&#125;</span><br /> <span class="br0">&#125;</span>
  </div>
</div> We have to cast the co-ordinate values from doubles to integers, so that they can mapped onto a grid. Here&#8217;s the end result. 

![my bezier curve][1]

 [1]: https://dl.dropboxusercontent.com/u/97701559/blog/bezier_curve.png